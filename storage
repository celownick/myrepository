mvn clean install -Dmaven.wagon.http.ssl.insecure=true -Dmaven.wagon.http.ssl.allowall=true

import io.restassured.RestAssured;
import io.restassured.response.Response;

public class AzureADTokenFetcher {

    private static final String TENANT_ID = "your_tenant_id";
    private static final String CLIENT_ID = "your_client_id";
    private static final String CLIENT_SECRET = "your_client_secret";
    private static final String SCOPE = "https://graph.microsoft.com/.default"; // lub inny odpowiedni scope

    public static String fetchAccessToken() {
        String tokenEndpoint = "https://login.microsoftonline.com/" + TENANT_ID + "/oauth2/v2.0/token";

        Response response = RestAssured
            .given()
                .contentType("application/x-www-form-urlencoded")
                .formParam("grant_type", "client_credentials")
                .formParam("client_id", CLIENT_ID)
                .formParam("client_secret", CLIENT_SECRET)
                .formParam("scope", SCOPE)
            .when()
                .post(tokenEndpoint)
            .then()
                .statusCode(200)
                .extract()
                .response();

        return response.jsonPath().getString("access_token");
    }

    public static void main(String[] args) {
        String accessToken = fetchAccessToken();
        System.out.println("Access Token: " + accessToken);
    }
}
